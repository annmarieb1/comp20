<!doctype html>
<html>
<head>
	<title>Set List</title>
	<meta charset="utf-8"/>
	<script>
		function loadFile() {
			/* Make instance of request object
			 * to make HTTP request after page is loaded
			 */
			request = new XMLHttpRequest();
			console.log("1 - request object created");
 
			// Set the URL for the request
			request.open("GET", "https://annmarieb1.github.io/comp20/setlist/setlist.json", true);
			console.log("2 - opened request file");
 
			// Set up event handler/callback
			request.onreadystatechange = function() {
				console.log("3 - readystatechange event fired.");
 
				if (request.readyState == 4 && request.status == 200) {
					console.log("READY STATE 4 STATUS 200")

					// Step 5: wait for done + success
					printList = "";
					result = request.responseText;
					console.log(result);
					// setlistRawStr = JSON.stringify(result);
					setlist = JSON.parse(result);
					console.log(setlist);

					// console.log("setlist raw: " + setlist);
					
					// printList = "<ul>";
					// setlist.forEach(function(animal) { 
					//   strHTML += "<li>" + animal.name + " : " + animal.type + "</li>";
					// }) 
					// strHTML += "</ul>";
					
					document.getElementById("raw-data").innerHTML = setlist;

					document.getElementById("data").innerHTML = setlist;
				}
				else if (request.readyState == 4 && request.status != 200) {

				document.getElementById("data").innerHTML = "Something is wrong!  Check the logs to see where this went off the rails";

				}

				else if (request.readyState == 3) {

					document.getElementById("data").innerHTML = "Too soon!  Try again";

				}

				else {
					document.getElementById("data").innerHTML = "Hang tight...we're trying to get your setlist";
				}

			}
		// Step 4: fire off the HTTP request
			request.send();
			console.log("4 - Request sent");
		}
	</script>
</head>


<body onload="loadFile()">

	<h1>Setlist</h1>
	<div id="raw-data"></div>
	<div id="data">Loading...</div>
</body>
</html>