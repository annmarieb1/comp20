<!-- index.html
     Ann Marie Burke
     COMP 20: Web Programming
     Fall 2020
     HW 5a: Joe's Hotdogs
 -->
 <!DOCTYPE html>
 <html>
     <head>
         <title>Amicable Numbers</title>
         <meta name="viewport" content="width=device-width, initial-scale=1">
         <style type="text/css">

        </style>
     </head>
     
     <body>
        <div id="form">
            <form action='#' method='post'>
                <p>
                    <label>Number 1</label>
                    <input type="number" name="number_1" id="number_1" required="1" min="0">
                </p>
                <p>
                    <label>Number 2</label>
                    <input type="number" name="number_2" id="number_2" required="1" min="0">
                </p>
                
                <input type="button" value=Submit onclick=readNumbers()>
            </form>
        </div>
        <div id="numbers">
            <script language="javascript">
                // reads and displays the numbers in a div on the page
                function readNumbers() {
                    var num1 = document.getElementById("number_1").value;
                    var num2 = document.getElementById("number_2").value;
                    amicable(num1, num2);
                }

                // takes two inputs: number and possible factor
                // and returns true if factor divides number, false otherwise
                function isFactor(num, possible) {
                    return ((num % possible) == 0)
                }

                // showArray takes an array and displays all items in array
                function showArray(array) {
                    for (i = 0; i < array.length; i++) {
                        document.write(array[i] + "&nbsp;");
                    }

                    document.write("<p>");
                }

                // addArray takes an array and returns sum of all elements
                function addArray(array) {
                    var sum = 0;
                    for (i = 0; i < array.length; i++) {
                        sum += array[i];
                    }

                    return sum;
                }

                // getFactors takes a number as a parameter and
                // returns an array with all possible factors of the number
                function getFactors(num) {
                    var factors = new Array(0);
                    var halfNum = (num / 2)
                    for (i = 0; i <= (num / 2); i++) {
                        if (isFactor(num, i)) {
                            factors.push(i);
                        }
                    }

                    return factors;
                }

                function amicable(num1, num2) {
                    var factorsNum1 = getFactors(num1);
                    var sumFactors1 = addArray(factorsNum1);

                    var factorsNum2 = getFactors(num2);
                    var sumFactors2 = addArray(factorsNum2);

                    document.write(`Factors of ${num1}: &nbsp;`);
                    showArray(factorsNum1);
                    document.write(`&nbsp; add up to ${sumFactors1}<p>`);

                    document.write(`Factors of ${num2}: &nbsp;`);
                    showArray(factorsNum2);
                    document.write(`&nbsp; add up to ${sumFactors2}<p>`);

                    if ((sumFactors1 == num2) && (sumFactors2 == num1)) {
                        document.write(`${num1} and ${num2} are amicable!`);
                    } else {
                        document.write(`${num1} and ${num2} not amicable :(`)
                    }
                }

                /************************* TESTING *************************

                // checkAssert checks is input is true
                // function used for testing
                function checkAssert(input) {
                    if (input) {
                        console.log("Test Passed :)");
                    } else {
                        console.log("Test Failed!!!!!!!!!! :)");
                    }
                }

                // isFactor tests
                checkAssert(isFactor(1, 1));
                checkAssert(! isFactor(1, 2));
                checkAssert(isFactor(2, 1));
                checkAssert(isFactor(80, 2));
                checkAssert(! isFactor(80, 72));
                checkAssert(isFactor(220, 55));
                checkAssert(isFactor(220, 1));
                checkAssert(! isFactor(11, 3));


                // showArray tests

                var testArr = new Array(10);
                var testArr2 = new Array(20);
                for (i = 0; i < testArr.length; i++) {
                    testArr[i] = i + 1;
                }
                for (i = 0; i < testArr2.length; i++) {
                    testArr2[i] = 0
                }

                showArray(testArr);
                showArray(testArr2);


                // addArray tests
                console.log(addArray(testArr));
                console.log(addArray(testArr2));

                // getFactors tests
                console.log("factors of 2: " + getFactors(2));
                console.log("factors of 10: " + getFactors(10));
                console.log("factors of 220: " + getFactors(220));
                console.log("factors of 284: " + getFactors(284));

                ************************* TESTING *************************/

            </script>
        </div>

        <footer>
            <p>Copyright &copy; Amicable Numbers 2020</p>
        </footer>
    </body>
 </html>
 