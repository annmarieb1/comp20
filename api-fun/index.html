<!DOCTYPE html>

<!-- index.html
     Ann Marie Burke
     COMP 20: Web Programming
     Fall 2020
     HW 9: API Fun
 -->

<html>
<head>
	<title>API Fun!</title>
	<meta charset="utf-8"/>
	<style type="text/css">
        h1 {
        	width: 50%;
        	padding: 10px;
        	color: #9359dd;
        	font-family: "Arial";
        }
        h2 {
            font-family: "Arial";
            font-style: italic;
            width: 100%;
            margin: 0px;
            padding: 10px;
            border: 0px;
        }
    </style>
	<script>
		function accessAPI() {
			// Make instance of request object
			// to make HTTP request after page is loaded
			request = new XMLHttpRequest();
 
			// Set the URL for the request
			request.open("GET", "https://dog.ceo/api/breeds/image/random", true);
 
			// Set up event handler/callback
			request.onreadystatechange = function() { 
				if (request.readyState == 4 && request.status == 200) {

					// get response
					result = request.responseText;

					// parse response
					parsed = JSON.parse(result);

					// get "message field"
					dogImage = parsed["message"];

					// string to display dog image
					displayImage = '<img src="' + dogImage
							    + '" title="random-dog-image" alt="[image of a dog]" '
							    + 'width="50%" />'
					
					document.getElementById("data").innerHTML = displayImage;

					// document.getElementById("data").innerHTML = setlist;
				} else if (request.readyState == 4 && request.status != 200) {
					document.getElementById("data").innerHTML = "Something is wrong!";

				} else if (request.readyState == 3) {
					document.getElementById("data").innerHTML = "Too soon! Try again";
				} else {
					document.getElementById("data").innerHTML = "";
				}

			}

			// send request
			request.send();
		}
	</script>
</head>


<body onload="accessAPI()">
	<h1>API Fun!</h1>
	<h2>Here's a random dog picture to brighten your day :)</h2>
	<br />
	<div id="data">Loading...</div>
	<div id="questions">
		<ul>
			<li>
				describe the API you selected and what it does:
				I selected the Dog CEO Dog API that returns a random image of a dog.
			</li>
			<li>
				cite the website where you found it: https://dog.ceo/dog-api/
			</li>
			<li>
				describe the options you used for the API request:
				My request just gets a random image.
				The API also allows you to choose a dog breed for the random images.
			</li>
			<li>
				give two applications where this API would be helpful
				<ol>
					<li>to get random images of dogs for an assignment</li>
					<li>to cheer people up by showing them a random image of a dog</li>
				</ol>
			</li>
		</ul>
	</div>
</body>
</html>